
Hello Dolly comes with the installation of Wordpress. Make sure it's enabled:
![[Pasted image 20250817195331.png]]

Reading the plugin description, you'll understand that this plugin places a random quote in your admin pages.

For example, Dashboard shows a quote at the top right next to the top right menu items:
![[Pasted image 20250817195715.png]]

Top right of post list:
![[Pasted image 20250817195747.png]]

It appears on all admin pages, including page list, and when you're editing a post or page - here's editing a post or a page:
![[Pasted image 20250817200502.png]]

---

## File structure

Something worth noting is that the plugin code for Hello Dolly is at:
```
wp-content/plugins/hello.php
```

Although you could just drop php file per plugin, the best practice is to have a plugin folder:
```
wp-content/plugins/hello-dolly/hello.php
```

## Plugin code

Let's look into the plugin code:
```
<?php
/**
 * @package Hello_Dolly
 * @version 1.7.2
 */
/*
Plugin Name: Hello Dolly
Plugin URI: http://wordpress.org/plugins/hello-dolly/
Description: This is not just a plugin, it symbolizes the hope and enthusiasm of an entire generation summed up in two words sung most famously by Louis Armstrong: Hello, Dolly. When activated you will randomly see a lyric from <cite>Hello, Dolly</cite> in the upper right of your admin screen on every page.
Author: Matt Mullenweg
Version: 1.7.2
Author URI: http://ma.tt/
*/

// Do not load directly.
if ( ! defined( 'ABSPATH' ) ) {
	die();
}

function hello_dolly_get_lyric() {
	/** These are the lyrics to Hello Dolly */
	$lyrics = "Hello, Dolly
Well, hello, Dolly
It's so nice to have you back where you belong
You're lookin' swell, Dolly
I can tell, Dolly
You're still glowin', you're still crowin'
You're still goin' strong
I feel the room swayin'
While the band's playin'
One of our old favorite songs from way back when
So, take her wrap, fellas
Dolly, never go away again
Hello, Dolly
Well, hello, Dolly
It's so nice to have you back where you belong
You're lookin' swell, Dolly
I can tell, Dolly
You're still glowin', you're still crowin'
You're still goin' strong
I feel the room swayin'
While the band's playin'
One of our old favorite songs from way back when
So, golly, gee, fellas
Have a little faith in me, fellas
Dolly, never go away
Promise, you'll never go away
Dolly'll never go away again";

	// Here we split it into lines.
	$lyrics = explode( "\n", $lyrics );

	// And then randomly choose a line.
	return wptexturize( $lyrics[ mt_rand( 0, count( $lyrics ) - 1 ) ] );
}

// This just echoes the chosen line, we'll position it later.
function hello_dolly() {
	$chosen = hello_dolly_get_lyric();
	$lang   = '';
	if ( 'en_' !== substr( get_user_locale(), 0, 3 ) ) {
		$lang = ' lang="en"';
	}

	printf(
		'<p id="dolly"><span class="screen-reader-text">%s </span><span dir="ltr"%s>%s</span></p>',
		__( 'Quote from Hello Dolly song, by Jerry Herman:' ),
		$lang,
		$chosen
	);
}

// Now we set that function up to execute when the admin_notices action is called.
add_action( 'admin_notices', 'hello_dolly' );

// We need some CSS to position the paragraph.
function dolly_css() {
	echo "
	<style type='text/css'>
	#dolly {
		float: right;
		padding: 5px 10px;
		margin: 0;
		font-size: 12px;
		line-height: 1.6666;
	}
	.rtl #dolly {
		float: left;
	}
	.block-editor-page #dolly {
		display: none;
	}
	@media screen and (max-width: 782px) {
		#dolly,
		.rtl #dolly {
			float: none;
			padding-left: 0;
			padding-right: 0;
		}
	}
	</style>
	";
}

add_action( 'admin_head', 'dolly_css' );

```

### 1) Plugin header & direct-access guard

```php
/**
 * @package Hello_Dolly
 * @version 1.7.2
 */
/*
Plugin Name: Hello Dolly
...
*/
```

- This block is **metadata** WordPress reads to list/activate the plugin (name, version, author, etc.).
    

```php
if ( ! defined( 'ABSPATH' ) ) { die(); }
```

- **Safety guard** so the PHP file can’t be run directly outside WordPress.
    

---

### 2) Picking a random lyric

```php
function hello_dolly_get_lyric() {
    $lyrics = "Hello, Dolly
    ...
    Dolly'll never go away again";
    $lyrics = explode( "\n", $lyrics );
    return wptexturize( $lyrics[ mt_rand( 0, count( $lyrics ) - 1 ) ] );
}
```

- `$lyrics` is a single multiline string of the song’s lyrics.
    
- `explode("\n", ...)` turns that into an **array of lines**.
    
- `mt_rand(0, count($lyrics)-1)` picks a **random line**.
    
- `wptexturize()` prettifies punctuation (smart quotes, apostrophes, etc.) to match WP typography.
    

> Note: For WordPress consistency, `wp_rand()` could be used instead of `mt_rand()` (minor).

---

### 3) Rendering the line in the admin

```php
function hello_dolly() {
    $chosen = hello_dolly_get_lyric();
    $lang   = '';
    if ( 'en_' !== substr( get_user_locale(), 0, 3 ) ) {
        $lang = ' lang="en"';
    }

    printf(
        '<p id="dolly"><span class="screen-reader-text">%s </span><span dir="ltr"%s>%s</span></p>',
        __( 'Quote from Hello Dolly song, by Jerry Herman:' ),
        $lang,
        $chosen
    );
}
```

- Gets a **random lyric**.
    
- **Accessibility & i18n**:
    
    - Checks the current user’s locale; if not English (`en_*`), adds `lang="en"` so assistive tech knows the lyric is English.
        
    - Uses `__( ... )` to make the screen-reader label translatable.
        
    - Includes a visually hidden label (`screen-reader-text`) so screen readers announce what the quote is.
        
    - Forces `dir="ltr"` for the lyric text, helpful in RTL admin locales.
        

---

### 4) Hooking into the admin UI

```php
add_action( 'admin_notices', 'hello_dolly' );
```

- Registers `hello_dolly()` to run on the **`admin_notices` hook**, which prints content near the top of every admin page. The plugin then positions it in the top-right via CSS.
    

---

### 5) Styling (inline CSS injected into admin head)

```php
function dolly_css() {
    echo "
    <style type='text/css'>
    #dolly { float: right; padding: 5px 10px; ... }
    .rtl #dolly { float: left; }
    .block-editor-page #dolly { display: none; }
    @media screen and (max-width: 782px) {
        #dolly, .rtl #dolly { float: none; padding-left: 0; padding-right: 0; }
    }
    </style>
    ";
}
add_action( 'admin_head', 'dolly_css' );
```

- Injects a small stylesheet into the **admin `<head>`**.
    
- Positions the paragraph:
    
    - **Default**: floats right; in RTL UIs, floats left.
        
    - **Gutenberg editor pages**: hidden (`display: none;`) so it doesn’t clutter the editing interface.
        
    - **Narrow screens**: removes float and horizontal padding for better fit.
        

> Modern alternative: enqueue an admin stylesheet via `admin_enqueue_scripts` or use `wp_add_inline_style()` for cleaner separation.

---

### TL;DR (flow)

1. WP reads the plugin header → plugin appears in the admin Plugins list.
    
2. On admin page load:
    
    - `hello_dolly()` is called via `admin_notices` → it prints a `<p id="dolly">` with an accessible label and a random lyric.
        
    - `dolly_css()` runs via `admin_head` → injects CSS that places the lyric in the top-right (or left in RTL), hides it on block editor pages, and tweaks mobile layout.
        

---

## Discussion - More on file structure

Note the style block is in the same file `hello.php`, likely the developer trying to avoid having multiple files. The best practice is to follow separation of concerns with css, js, php, etc files.

A common plugin that all WP web admins need to install when they install WP is Classic Editor. Take a look at their file structure:
```
.
├── classic-editor.php
├── js
│   └── block-editor-plugin.js
├── LICENSE.md
├── readme.txt
└── scripts
    ├── post.js
    └── post.min.js
```

They've separated js and php into their own files, but chose to keep style blocks inside `classic-editor.php`. They're partially practicing the separation of concerns, likely because their css is very minimal.

Let's take a look at Elementor Pro plugin which is a free builder that uses blocks (competitor of WPBakery site builder plugin that is NOT free):
```
.
├── app
│   ├── admin-menu-items
│   ├── app.php
│   ├── modules
│   └── view.php
├── assets
│   ├── css
│   │   ├── admin-bar.css
│   │   ├── admin-bar.min.css
│   │   ├── admin-rtl.css
│   │   ├── ...
│   │   └── widget-video.min.css
│   ├── data
│   │   └── responsive-widgets.json
│   ├── images
│   │   ├── announcement.png
│   │   ├── app
│   │   ├── background-placeholder.svg
│   │   ├── ...
│   │   └── unlock-sticky.svg
│   ├── js
│   │   ├── 0d1a75a41cae2a76432a.bundle.js
│   │   ├── 152f977e0c1304a3b0db.bundle.js
│   │   ├── 4102e11512e21a92ba35.bundle.js
│   │   ├── ...
│   │   └── youtube-handler.min.js
│   ├── lib
│   ├── mask-shapes
│   ├── shapes
│   └── svg-paths
├── changelog.txt
├── CONTRIBUTING.md
├── core
│   ├── admin
│   ├── app
│   ├── base
│   ├── ...
│   └── wp-api.php
├── data
│   ├── base
│   ├── manager.php
│   └── v2
├── elementor.php
├── eslint-local-rules.js
├── includes
│   ├── admin-templates
│   ├── api.php
│   ├── autoloader.php
│   ├── ...
│   └── widgets
├── license.txt
├── modules
│   ├── admin-bar
│   ├── admin-top-bar
│   ├── ai
│   ├── ...
│   └── wp-rest
├── readme.txt
├── run-on-linux.js
├── scripts
│   ├── prepare-beta-release.sh
│   └── setup-testing.sh
├── vendor
│   ├── autoload.php
│   └── composer
└── vendor_prefixed
    ├── dependency-injection
    └── twig
```

They've separated by js, css, images, and php. Note the tree is partial/truncated to highlight the important points in our discussion.

---

## Have it only show quote at editing a page

You’ve got two good ways to scope Hello Dolly so it only shows on **specific admin screens**—e.g., when **editing a Page**. We will go through both ways so you learn more WP plugin development.

Continue to the next lesson.
Requirement: Done previous lesson

![[Wordpress-Plugin-Tabbed-Page.gif]]

Leave the views/ folder alone. 

But change the plugin php file to:
```
<?php
/**
 * Plugin Name: WF Resources
 * Plugin URI: https://domain.com/wf-wp-resources
 * Description: Help documentation inside WP Admin Dashboard for Wordpress and the most common site builders like Gutenberg, Classic Editor, WPBakery, and Elementor Pro.
 * Version: 1.1.0
 * Author: Weng Fei Fung
 * Author URI: https://domain.com
 * License: GPL v2 or later
 * License URI: https://www.gnu.org/licenses/gpl-2.0.html
 * Text Domain: wf-wordpress-resources
 * Domain Path: /languages
 */

if (!defined('ABSPATH')) {
    exit;
}

class WF_Resources {

    public function __construct() {
        add_action('admin_menu', array($this, 'add_admin_menu'));
    }

    /**
     * Add a top-level menu in the admin sidebar
     */
    public function add_admin_menu() {
        add_menu_page(
            __('WordPress Resources', 'wf-wordpress-resources'), // Page title
            __('WordPress Resources', 'wf-wordpress-resources'), // Menu title
            'manage_options',                              // Capability
            'wf-wordpress-resources',                      // Menu slug
            array($this, 'render_resources_page'),         // Callback
            'dashicons-wordpress-alt',                     // Icon
            25                                             // Position
        );
    }
    
    public function render_resources_page() {
        // Default tab is "general" if none selected
        $active_tab = isset($_GET['tab']) ? sanitize_text_field($_GET['tab']) : 'general';
        ?>
    
        <div class="wrap">
            <h1><?php esc_html_e('WordPress Resources', 'wf-year-shortcode'); ?></h1>
    
            <h2 class="nav-tab-wrapper">
                <a href="?page=wf-wordpress-resources&tab=wp"
                   class="nav-tab <?php echo $active_tab === 'wp' ? 'nav-tab-active' : ''; ?>">
                    Wordpress
                </a>
                <a href="?page=wf-wordpress-resources&tab=gutenberg"
                   class="nav-tab <?php echo $active_tab === 'gutenberg' ? 'nav-tab-active' : ''; ?>">
                    Gutenberg
                </a>
                <a href="?page=wf-wordpress-resources&tab=wpbakery"
                   class="nav-tab <?php echo $active_tab === 'wpbakery' ? 'nav-tab-active' : ''; ?>">
                    WPBakery
                </a>
                <a href="?page=wf-wordpress-resources&tab=elementor"
                   class="nav-tab <?php echo $active_tab === 'elementor' ? 'nav-tab-active' : ''; ?>">
                    Elementor
                </a>
            </h2>
    
            <div class="tab-content">
                <?php
                if ($active_tab === 'wp') {
                    include plugin_dir_path(__FILE__) . 'views/main-page.php';
                }
    
                else if ($active_tab === 'gutenberg') {
                    include plugin_dir_path(__FILE__) . 'views/gutenberg-page.php';
                }
    
                else if ($active_tab === 'wpbakery') {
                    include plugin_dir_path(__FILE__) . 'views/wpbakery-page.php';
                }
    
                else if ($active_tab === 'elementor') {
                    include plugin_dir_path(__FILE__) . 'views/elementor-page.php';
                }

                else {
                    echo '
                        <p>Welcome to Weng\'s help documents! Click a tab to continue.</p>
                        ';
                }
                ?>
            </div>
        </div>
        <?php
    }
}

/**
 * Initialize the plugin
 */
function wff_add_resources() {
    new WF_Resources();
}
add_action('plugins_loaded', 'wff_add_resources');
```

^ What really happens is the Wordpress core function (`add_menu_page`) to add to the menu is only called once. Calling it added "WordPress Resources" menu item to the root level. When you called `add_menu_page`, you also passed a callback function that will run when the user clicks the menu item. The callback is expected to return html, which will be rendered to the right side of the sidebar.

Looking through the plugin code, you see that the tabs are rendered, each tab opening a query string `?tab=..`. Below the tabs is a dynamically rendered panel. How it dynamically renders is when the page refreshes (when you click menu item OR a tab), the web browser checks for `$_GET["tab"]` to see if exists. If doesn't exist, it renders "Welcome to Weng's help...", but if the query string exists, it renders the panel that the query string asks for.
![[Pasted image 20250819022710.png]]

Because we've organized the rendering into including template views from the previous lesson at 3.5, the code is manageable:
```
            <div class="tab-content">
                <?php
                if ($active_tab === 'wp') {
                    include plugin_dir_path(__FILE__) . 'views/main-page.php';
                }
    
                else if ($active_tab === 'gutenberg') {
                    include plugin_dir_path(__FILE__) . 'views/gutenberg-page.php';
                }
    
                else if ($active_tab === 'wpbakery') {
                    include plugin_dir_path(__FILE__) . 'views/wpbakery-page.php';
                }
    
                else if ($active_tab === 'elementor') {
                    include plugin_dir_path(__FILE__) . 'views/elementor-page.php';
                }

                else {
                    echo '
                        <p>Welcome to Weng\'s help documents! Click a tab to continue.</p>
                        ';
                }
                ?>
            </div>
```